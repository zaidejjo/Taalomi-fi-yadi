<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        {% load static %}
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>{% block title %}ØªØ¹Ù„Ù…ÙŠ ÙÙŠ ÙŠØ¯ÙŠ{% endblock %}</title>

        <!-- Favicon -->
        <link rel="icon" href="{% static 'images/last.png' %}" />

        <!-- Bootstrap RTL CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css"
            rel="stylesheet"
        />

        <!-- Font Awesome -->
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            rel="stylesheet"
        />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="{% static 'css/style.css' %}" />

        <style>
            /* ===== Variables ===== */
            :root {
                --bg-color: #f5f7fa;
                --text-color: #000;
                --navbar-bg: #0d6efd;
                --navbar-text: #fff;
                --card-bg: #fff;
                --footer-bg: #0d6efd;
                --primary-color: #0d6efd;
                --secondary-color: #00b4d8;
                --hover-bg: rgba(13, 110, 253, 0.1);
                --font-base: 0.95rem;
                --font-small: 0.85rem;
                --border-radius: 12px;
                --transition-speed: 0.3s;
            }

            /* ===== Dark Mode ===== */
            [data-theme='dark'] {
                --bg-color: #1e1e2f;
                --text-color: #f5f5f5;
                --navbar-bg: #121212;
                --navbar-text: #f5f5f5;
                --card-bg: #2c2c3a;
                --footer-bg: #121212;
                --hover-bg: rgba(255, 255, 255, 0.1);
                --primary-color: #00b4d8; /* Adjust if needed */
                --secondary-color: #0d6efd;
            }

            /* ===== Global ===== */
            html,
            body {
                margin: 0;
                padding: 0;
                height: 100%;
                font-size: var(--font-base);
                background-color: var(--bg-color);
                color: var(--text-color);
                transition: background-color var(--transition-speed) ease,
                    color var(--transition-speed) ease;
            }

            a {
                color: inherit;
                text-decoration: none;
                transition: color var(--transition-speed) ease;
            }
            a:hover {
                color: var(--primary-color);
            }

            /* ===== Content wrapper ===== */
            .content-wrapper {
                flex: 1 0 auto;
                padding: 1rem 0;
            }

            /* ===== Navbar ===== */
            .navbar {
                background-color: var(--navbar-bg) !important;
                transition: background-color var(--transition-speed) ease;
            }
            .navbar .nav-link,
            .navbar .navbar-brand span {
                color: var(--navbar-text) !important;
            }
            .navbar .nav-link:hover {
                color: var(--secondary-color) !important;
            }
            .navbar-brand img {
                width: 60px;
                height: 60px;
                object-fit: cover;
                border-radius: 10px;
            }

            /* ===== Dropdown hover & animation ===== */
            .navbar .dropdown-menu {
                opacity: 0;
                visibility: hidden;
                transform: translateY(10px);
                transition: all 0.25s ease;
                background-color: var(--card-bg);
                border-radius: var(--border-radius);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            }
            .navbar .dropdown-menu.show {
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }

            .dropdown-menu .dropdown-item {
                position: relative;
                transition: all 0.25s ease, transform 0.25s ease;
                opacity: 0;
                transform: translateY(10px);
                color: var(--text-color);
            }
            .dropdown-menu.animate-dropdown .dropdown-item {
                opacity: 1;
                transform: translateY(0);
            }
            .dropdown-menu.animate-dropdown .dropdown-item:nth-child(1) {
                transition-delay: 0.05s;
            }
            .dropdown-menu.animate-dropdown .dropdown-item:nth-child(2) {
                transition-delay: 0.1s;
            }
            .dropdown-menu.animate-dropdown .dropdown-item:nth-child(3) {
                transition-delay: 0.15s;
            }
            .dropdown-menu.animate-dropdown .dropdown-item:nth-child(4) {
                transition-delay: 0.2s;
            }

            .dropdown-menu .dropdown-item::before {
                content: '';
                position: absolute;
                top: 0;
                right: 0;
                width: 0;
                height: 100%;
                background-color: var(--hover-bg);
                border-radius: var(--border-radius);
                z-index: -1;
                transition: width 0.25s ease;
            }
            .dropdown-menu .dropdown-item:hover::before {
                width: 100%;
            }
            .dropdown-menu .dropdown-item:hover {
                color: var(--primary-color);
            }

            /* ===== Cards ===== */
            .card {
                background-color: var(--card-bg);
                color: var(--text-color);
                border-radius: var(--border-radius);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
                padding: 1rem;
                margin-bottom: 1rem;
                transition: background-color var(--transition-speed) ease,
                    color var(--transition-speed) ease;
            }

            /* ===== Footer ===== */
            footer {
                flex-shrink: 0;
                padding: 1rem 0;
                text-align: center;
                background-color: var(--footer-bg);
                color: var(--navbar-text);
                transition: background-color var(--transition-speed) ease,
                    color var(--transition-speed) ease;
            }

            /* ===== Dark Mode Button ===== */
            #toggle-theme {
                font-size: 0.8rem;
                padding: 0.25rem 0.5rem;
                cursor: pointer;
            }

            /* ===== Responsive ===== */
            @media (max-width: 768px) {
                .navbar-brand span {
                    font-size: var(--font-small);
                }
            }
            @media (max-width: 480px) {
                .navbar-brand img {
                    width: 50px;
                    height: 50px;
                }
            }

            /* ===== Animations ===== */
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>
    <body>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-dark shadow-sm">
            <div class="container-fluid">
                <a
                    class="navbar-brand d-flex align-items-center"
                    href="{% url 'core:home' %}"
                >
                    <img
                        src="{% static 'images/last.png' %}"
                        alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹"
                        class="me-2"
                    />
                    <span class="fw-bold fs-5">ØªØ¹Ù„Ù…ÙŠ ÙÙŠ ÙŠØ¯ÙŠ</span>
                </a>

                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarNav"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a
                                class="nav-link d-flex align-items-center"
                                href="{% url 'core:home' %}"
                            >
                                <i class="fa-solid fa-house me-1"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                            </a>
                        </li>

                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle"
                                href="#"
                                data-bs-toggle="dropdown"
                                >ğŸ“š Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ§Øª</a
                            >
                            <ul class="dropdown-menu">
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="{% url 'academics:subjects' %}"
                                        >Ø§Ù„Ù…ÙˆØ§Ø¯</a
                                    >
                                </li>
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="{% url 'academics:exams' %}"
                                        >Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</a
                                    >
                                </li>
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="{% url 'academics:grades' %}"
                                        >Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª</a
                                    >
                                </li>
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="{% url 'academics:timetable' %}"
                                        >Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</a
                                    >
                                </li>
                            </ul>
                        </li>

                        <li class="nav-item">
                            <a
                                class="nav-link"
                                href="{% url 'attendance:absence_list' %}"
                                >ğŸ•’ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                href="{% url 'assignments:assignment_list' %}"
                                >ğŸ“ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                href="{% url 'competitions:competition_list' %}"
                                >ğŸ† Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                href="{% url 'ai_chat:chat_home' %}"
                                >ğŸ¤– Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø°ÙƒÙŠØ©</a
                            >
                        </li>
                    </ul>

                    <ul class="navbar-nav ms-auto align-items-center">
                        <li class="nav-item me-2">
                            <button
                                id="toggle-theme"
                                class="btn btn-outline-light btn-sm"
                            >
                                ğŸŒ™
                            </button>
                        </li>
                        {% if user.is_authenticated %}
                        <li class="nav-item">
                            <a
                                class="nav-link d-flex align-items-center"
                                href="{% url 'core:profile' user.id %}"
                                >Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                                <i class="fa-solid fa-user ms-1"></i
                            ></a>
                        </li>
                        <li class="nav-item">
                            <form method="post" action="{% url 'logout' %}">
                                {% csrf_token %}
                                <button
                                    type="submit"
                                    class="btn btn-link nav-link p-0 m-0"
                                >
                                    ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                                    <i
                                        class="fa-solid fa-right-from-bracket ms-1"
                                    ></i>
                                </button>
                            </form>
                        </li>
                        {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}"
                                >ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a
                            >
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'signup' %}"
                                >Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a
                            >
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Page content -->
        <div class="container my-4 content-wrapper">
            {% block content %}{% endblock %}
        </div>

        <!-- Footer -->
        <footer>
            <div class="container">
                <p class="mb-1">
                    Â© 2025 Ù…Ù†ØµØ© ØªØ¹Ù„Ù…ÙŠ ÙÙŠ ÙŠØ¯ÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.
                </p>
                <p class="mb-1">
                    ÙØ±ÙŠÙ‚ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:
                    <a
                        href="https://www.instagram.com/zaidejjo/"
                        class="fw-bold text-decoration-underline"
                        >Ø²ÙŠØ¯ Ø¹Ù„ÙŠ Ø¹Ø¬Ùˆ</a
                    >,
                    <!-- <a href="https://www.instagram.com/mohammadshboul179/" class="fw-bold text-decoration-underline" >Ù…Ø­Ù…Ø¯ Ø¥ÙŠØ§Ø¯ Ø§Ù„Ø´Ø¨ÙˆÙ„</a>, -->
                    <!-- <a href="https://www.instagram.com/wardatryadahmad/" class="fw-bold text-decoration-underline" >Ø±ÙŠØ§Ø¶ Ø£Ø­Ù…Ø¯ Ø§Ù„ÙˆØ±Ø¯Ø§Øª</a> -->
                </p>
                <p>
                    Ù„Ù„ØªÙˆØ§ØµÙ„:
                    <a
                        href="mailto:zaidejjo@gmail.com"
                        class="text-decoration-underline"
                        >zaidejjo@gmail.com</a
                    >
                    |
                    <a
                        href="mailto:TaalomiFiYadi@gmail.com"
                        class="text-decoration-underline"
                        >TaalomiFiYadi@gmail.com</a
                    ><br />
                    Ø§Ù„Ù‡Ø§ØªÙ:
                    <a
                        href="tel:+962790000000"
                        class="text-decoration-underline"
                        >+962 788 09 1124</a
                    >
                </p>
            </div>
        </footer>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Dark/Light Mode -->
        <script>
            const toggleBtn = document.getElementById('toggle-theme');
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                toggleBtn.innerText = 'â˜€ï¸';
            }

            toggleBtn.onclick = () => {
                const theme =
                    document.documentElement.getAttribute('data-theme') ===
                    'dark'
                        ? 'light'
                        : 'dark';
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                toggleBtn.innerText = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
            };
        </script>

        <!-- Dropdown hover animation -->
        <script>
            document.querySelectorAll('.navbar .dropdown').forEach((drop) => {
                let timeout;
                const menu = drop.querySelector('.dropdown-menu');

                drop.addEventListener('mouseenter', () => {
                    clearTimeout(timeout);
                    menu.classList.add('show', 'animate-dropdown');
                });

                drop.addEventListener('mouseleave', () => {
                    timeout = setTimeout(() => {
                        menu.classList.remove('show', 'animate-dropdown');
                    }, 300);
                });
            });
        </script>
    </body>
</html>
